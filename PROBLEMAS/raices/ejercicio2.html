<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 2 - Ra√≠ces en Progresi√≥n Aritm√©tica</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
    <style>
        :root {
            --color-primary: #008080;
            --color-bg: #FDFBD4;
            --color-accent: #05472A;
            --color-yellow: #fff8a6;
            --color-text: #222222;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            font-size: 1rem;
            height: 100vh;
            overflow: hidden;
            cursor: pointer;
        }

        .main-header {
            border-radius: 0.75rem;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            color: white;
            padding: 1rem;
            margin: 0 1rem 1rem;
            text-align: center;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
        }

        .main-header h1 { 
            font-size: 1.6rem; 
            letter-spacing: 0.05em; 
            margin-bottom: 0.3rem; 
        }

        /* Fase 1: 4 pasos centrados vertical/horizontal */
        .main-container.phase1 {
            position: relative;
            height: calc(100vh - 140px);
            max-width: 1500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            padding: 2rem;
        }

        /* Fase 2: Layout de columnas */
        .main-container.phase2 {
            height: calc(100vh - 140px);
            display: flex;
        }

        .left-panel {
            flex: 0 0 50%;
            padding: 1.5rem;
            background: rgba(255,255,255,0.95);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .right-panel {
            flex: 1;
            padding: 1.5rem;
            background: rgba(255,248,166,0.3);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .step {
            display: none;
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 2px solid transparent;
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
            max-width: 100%;
            position: relative;
        }

        .step.visible {
            display: block;
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Resaltado SOLO bordes */
        .step.new-step {
            border-color: var(--color-yellow);
            box-shadow: 
                0 0 0 4px rgba(255,248,166,0.6),
                inset 0 0 0 4px rgba(255,248,166,0.6),
                0 4px 20px rgba(244,180,0,0.3);
            animation: borderPulse 2s ease-out;
        }

        @keyframes borderPulse {
            0% { 
                border-color: #fff176;
                box-shadow: 
                    0 0 0 4px #fff176,
                    inset 0 0 0 4px #fff176,
                    0 6px 24px rgba(255,241,118,0.7);
            }
            50% { 
                box-shadow: 
                    0 0 0 6px var(--color-yellow),
                    inset 0 0 0 6px var(--color-yellow),
                    0 6px 28px rgba(244,180,0,0.5);
            }
            100% { 
                border-color: var(--color-yellow);
                box-shadow: 
                    0 0 0 4px rgba(255,248,166,0.6),
                    inset 0 0 0 4px rgba(255,248,166,0.6),
                    0 4px 20px rgba(244,180,0,0.3);
            }
        }

        /* Tama√±os por fase */
        .phase1 .step { 
            font-size: 1.2rem; 
            max-width: 1200px;
            width: 100%;
        }

        .phase2 .left-steps { 
            font-size: 0.85rem; 
            transform: scale(0.88);
            opacity: 0.92;
        }

        .phase2 .right-steps { 
            font-size: 1rem; 
        }

        .paso-title {
            color: var(--color-accent);
            font-size: 1.25em;
            font-weight: 700;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--color-primary);
        }

        .phase1 .paso-title { font-size: 1.4em; }
        .phase2 .left-steps .paso-title { font-size: 1em; }

        .math-display {
            font-size: 1.5em !important;
            width: 100%;
            overflow-x: auto;
            padding: 1rem 0;
            margin: 1rem 0;
        }

        .phase1 .math-display { font-size: 1.8em !important; }
        .phase2 .left-steps .math-display { font-size: 1.25em !important; }

        .boxed {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            border: 2px solid #4caf50;
            border-radius: 6px;
            padding: 0.6rem 1rem;
            display: inline-block;
            font-weight: bold;
            margin: 0.4rem;
        }

        ul { margin-left: 1.5rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }

        @media (max-width: 1200px) {
            .phase1 .step { max-width: 900px; }
        }

        @media (max-width: 768px) {
            .phase2 { flex-direction: column; }
            .left-panel, .right-panel { padding: 1rem; }
            .phase1 .step { font-size: 1rem; max-width: 100%; }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <h1>üìê Ejercicio 2</h1>
        <h2>Ra√≠ces en Progresi√≥n Aritm√©tica</h2>
    </header>

    <div class="main-container phase1" id="mainContainer">
        <!-- 4 primeros pasos - CENTRO -->
        <div class="step" id="step0">
            <div class="paso-title">üßÆ Enunciado</div>
            <p>Sea \( p \in \mathbb{R} \), si las ra√≠ces de</p>
            <div class="math-display">\[ x^3 + 2px^2 - px + 10 = 0 \]</div>
            <p>est√°n en <strong>progresi√≥n aritm√©tica</strong>, calcula dichas ra√≠ces y el valor de \( p \).</p>
        </div>

        <div class="step" id="step1">
            <div class="paso-title">üìù Plantear las ra√≠ces</div>
            <p>Si las ra√≠ces est√°n en progresi√≥n aritm√©tica, las escribimos como:</p>
            <div class="math-display">\[ a-d, \quad a, \quad a+d \]</div>
        </div>

        <div class="step" id="step2">
            <div class="paso-title">üìä Relaciones de Vieta</div>
            <p>Para \( x^3 + bx^2 + cx + d = 0 \):</p>
            <ul>
                <li>Suma de ra√≠ces: \( r_1 + r_2 + r_3 = -b \)</li>
                <li>Suma productos dos a dos: \( r_1r_2 + r_2r_3 + r_1r_3 = c \)</li>
                <li>Producto: \( r_1 r_2 r_3 = -d \)</li>
            </ul>
            <p>Suma: \( (a-d) + a + (a+d) = 3a \)</p>
        </div>

        <div class="step" id="step3">
            <div class="paso-title">‚öñÔ∏è Igualar coeficientes</div>
            <p>Comparando con \( x^3 + 2px^2 - px + 10 = 0 \):</p>
            <div class="math-display">\[ \begin{align*}
            -2p &= 3a \\
            -p &= 3a^2 - d^2 \\
            10 &= -a(a^2 - d^2)
            \end{align*} \]</div>
        </div>

        <!-- 4 siguientes pasos - DERECHA -->
        <div class="step left-steps" id="step4">
            <div class="paso-title">üîß Resolver sistema</div>
            <p>De la primera: \( p = -\frac{3a}{2} \)</p>
            <div class="math-display">\[ \frac{3a}{2} = 3a^2 - d^2 \implies d^2 = 3a^2 - \frac{3a}{2} \]</div>
            <div class="math-display">\[ a^3 - a(3a^2 - \frac{3a}{2}) = 10 \implies -2a^3 + \frac{3a^2}{2} = 10 \]</div>
            <div class="math-display">\[ 4a^3 - 3a^2 - 20 = 0 \]</div>
        </div>

        <div class="step left-steps" id="step5">
            <div class="paso-title">‚úÖ Ra√≠z de la c√∫bica</div>
            <p>La ra√≠z real de \( 4a^3 - 3a^2 - 20 = 0 \) es:</p>
            <div class="math-display">\[ a = 2 \]</div>
        </div>

        <div class="step left-steps" id="step6">
            <div class="paso-title">üéØ Resultados finales</div>
            <p>\( p = -\frac{3 \cdot 2}{2} = -3 \)</p>
            <p>\( d^2 = 3 \cdot 4 - \frac{3 \cdot 2}{2} = 9 \implies d = 3 \)</p>
            <div class="math-display">\[ -1, \quad 2, \quad 5 \]</div>
        </div>

        <div class="step left-steps" id="step7">
            <div class="paso-title">üèÅ Conclusi√≥n</div>
            <p style="font-size: 1.3em; text-align: center; color: var(--color-accent);">
                Las ra√≠ces son <span class="boxed">-1</span>, <span class="boxed">2</span> y <span class="boxed">5</span><br>
                y el valor de \( p \) es <span class="boxed">-3</span>
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const steps = document.querySelectorAll('.step');
            const container = document.getElementById('mainContainer');
            let currentStep = -1;
            const TRANSITION_STEP = 4; // Cambio en paso 4

            function showNextStep() {
                if (currentStep >= 0) {
                    steps[currentStep].classList.remove('new-step');
                }

                currentStep++;
                
                if (currentStep < steps.length) {
                    steps[currentStep].classList.add('visible', 'new-step');
                    
                    // TRANSICI√ìN: Despu√©s del paso 3 (cuando se hace click para mostrar paso 4)
                    if (currentStep === TRANSITION_STEP) {
                        // Animar transformaci√≥n a columnas
                        container.classList.remove('phase1');
                        container.classList.add('phase2');
                        
                        // Crear panels y reorganizar
                        createColumnLayout();
                    } else {
                        if (window.MathJax && window.MathJax.typesetPromise) {
                            window.MathJax.typesetPromise([steps[currentStep]]);
                        }
                    }
                    
                    // Scroll suave
                    steps[currentStep].scrollIntoView({ 
                        behavior: 'smooth', 
                        block: currentStep >= TRANSITION_STEP ? 'nearest' : 'center' 
                    });
                }
            }

            function createColumnLayout() {
                const leftPanel = document.createElement('div');
                leftPanel.className = 'left-panel';
                
                const rightPanel = document.createElement('div');
                rightPanel.className = 'right-panel';
                
                // Mover primeros 4 pasos a izquierda
                for (let i = 0; i < 4; i++) {
                    steps[i].classList.add('left-steps');
                    leftPanel.appendChild(steps[i]);
                }
                
                // Mover siguientes 4 pasos a derecha
                for (let i = 4; i < steps.length; i++) {
                    steps[i].classList.add('right-steps');
                    rightPanel.appendChild(steps[i]);
                }
                
                container.innerHTML = '';
                container.appendChild(leftPanel);
                container.appendChild(rightPanel);
                
                // Re-render MathJax despu√©s de reorganizar DOM
                setTimeout(() => {
                    if (window.MathJax && window.MathJax.typesetPromise) {
                        window.MathJax.typesetPromise();
                    }
                }, 300);
            }

            // Click anywhere to advance
            document.addEventListener('click', showNextStep);
            
            // Auto-start primer paso
            setTimeout(showNextStep, 600);
        });
    </script>
</body>
</html>
