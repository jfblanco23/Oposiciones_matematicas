<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soluciones Básicas en Programación Lineal</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
          --color-primary: #008080;
          --color-bg: #FDFBD4;
          --color-accent: #05472A;
          --color-yellow: #fff8a6;
          --color-text: #222222;
        }

        body {
          font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          background-color: var(--color-bg);
          color: var(--color-text);
          line-height: 1.7;
          padding: 1.5rem 1rem;
          font-size: 1.24rem;
          max-width: 1500px;
          margin: 0 auto;
        }

        .math-block {
          font-size: 1.19em;
        }

        .main-header {
          border-radius: 0.75rem;
          background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
          color: white;
          padding: 1.5rem;
          margin-bottom: 1.5rem;
          text-align: center;
          box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
        }

        .main-header h1 {
          font-size: 2.1rem;
          letter-spacing: 0.09em;
          margin-bottom: 0.5rem;
        }

        .main-header h2 {
          font-size: 1.06rem;
          font-weight: 400;
        }

        /* Tabs, Content, Boxes */
        .tabs { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
        .tab-button {
          border: none; padding: 0.7rem 1.2rem; border-radius: 999px;
          background-color: white; color: var(--color-primary); font-weight: 600;
          font-size: 1.08em; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.08);
          transition: background-color 0.2s, color 0.2s, transform 0.1s;
        }
        .tab-button.active { background-color: var(--color-primary); color: white; }
        .tab-button:hover { transform: translateY(-1px); }

        main { max-width: 1500px; margin: 0 auto; }
        .tab-content {
          display: none;
          background-color: rgb(255 255 255 / 0.92);
          border-radius: 0.85rem;
          padding: 1.82rem;
          box-shadow: 0 4px 12px rgba(0,0,0,0.09);
          margin-bottom: 1.7rem;
          font-size: 1.10em;
        }
        .tab-content.active { display: block; }

        .tab-content h3 {
          color: var(--color-accent);
          margin-bottom: 1.02rem;
          border-bottom: 2px solid rgba(0,128,128,0.18);
          padding-bottom: 0.35rem;
          font-size: 1.27em;
        }

        .tab-content h4 { margin-top: 1.17rem; margin-bottom: 0.61rem; color: var(--color-primary);}
        .tab-content h5 { margin-top: 0.22rem; margin-bottom: 0.35rem; color: var(--color-accent); font-size:1.06em;}

        p { margin-bottom: 0.67rem; }

        ul, ol { margin-left: 1.32rem; margin-bottom: 1.08rem; }

        /* Boxes, Highlighted */
        .boxed {
          border-left: 4px solid var(--color-primary);
          background: rgba(0,128,128,0.05);
          padding: 1.10rem 1.12rem;
          margin: 1.01rem 0;
          border-radius: 0.5rem;
          font-size:1.01em;
        }
        .highlight-strong {
          border-left-color: var(--color-accent);
          background: rgba(5, 71, 42, 0.11);
        }

        /* Button y pasos demostración */
        .step-button {
          display: inline-block;
          margin: 0.8rem 0 1.02rem;
          padding: 0.67rem 1.08rem;
          border-radius: 999px;
          border: none;
          background-color: var(--color-accent);
          color: white;
          font-weight: 600;
          font-size: 1.07em;
          cursor: pointer;
          box-shadow: 0 3px 8px rgba(0,0,0,0.14);
          transition: background-color 0.2s, transform 0.1s;
        }
        .step-button:hover {
          background-color: #07613a;
          transform: translateY(-1px);
        }

        /* Pasos de la demostración: mantienen visible todos, pero cada .visible se resalta */
        .step-container {
          border-radius: 0.72rem;
          background-color: rgb(255 255 255 / 0.97);
          border: 1px solid rgba(0,0,0,0.07);
          padding: 0.96rem 1rem;
        }
        .step {
          padding: 0.82rem 1.09rem;
          border-radius: 0.65rem;
          margin-bottom: 0.58rem;
          background: none;
          transition: background 0.15s;
        }
        .step.visible {
          background-color: var(--color-yellow);
          box-shadow: 0 0 0 1px rgba(255,209,26,0.23);
        }

        /* Subpestañas */
        .sub-tabs { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 0.3rem; 
            margin: 1.5rem 0 1rem; 
        }
        .sub-tab-button {
            border: none; 
            padding: 0.5rem 1rem; 
            border-radius: 6px;
            background-color: rgba(0,128,128,0.1); 
            color: var(--color-primary); 
            font-weight: 500;
            font-size: 0.95em; 
            cursor: pointer; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            transition: background-color 0.2s, color 0.2s, transform 0.1s;
        }
        .sub-tab-button.active { 
            background-color: var(--color-primary); 
            color: white; 
        }
        .sub-tab-button:hover { 
            transform: translateY(-1px); 
        }

        .sub-tab-content {
            display: none;
            padding: 1rem 0;
        }
        .sub-tab-content.active { 
            display: block; 
        }

        /* Columnas para ejemplos */
        .columns-container {
            display: flex;
            gap: 2rem;
            margin: 1.5rem 0;
        }
        .column {
            flex: 1;
        }
        
        /* MathJax: mayor tamaño */
        .mjx-container { font-size: 1.18em !important; }

        /* Responsive */
        @media (max-width: 768px) {
          body { padding: 0.6rem; font-size: 1.07rem;}
          .main-header { padding: 1rem; }
          .main-header h1 { font-size: 1.23rem; }
          .main-header h2 { font-size: 0.93rem; }
          .tab-content { padding: 1rem;}
          .columns-container {
              flex-direction: column;
          }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <h1>SOLUCIONES BÁSICAS EN PROGRAMACIÓN LINEAL</h1>
        <h2>Definiciones, Teoremas y Demostraciones</h2>
    </header>

    <main>
        <div class="tabs">
            <button class="tab-button active" data-tab="definiciones">Definiciones</button>
            <button class="tab-button" data-tab="teoremas">Teoremas Fundamentales</button>
            <button class="tab-button" data-tab="demostraciones">Demostraciones</button>
        </div>

        <!-- CONTENIDO DE DEFINICIONES -->
        <section id="definiciones" class="tab-content active">
            <h3>Soluciones Básicas</h3>
            
            <p>Dado el sistema de ecuaciones \(Ax = b\) con \(x \in \mathbb{R}^n\), \(b \in \mathbb{R}^m\) y \(A \in \mathbb{M}_{m \times n} (\mathbb{R})\) de rango \(m\), con \(m \leq n\), reordenamos la matriz de manera que las \(m\) primeras columnas sean linealmente independientes.</p>
            
            <p>Ahora, sea \(B \in \mathbb{M}_{m \times m} (\mathbb{R})\) la matriz determinada por estas \(m\) primeras columnas. Entonces, \(B\) es una matriz invertible y \(x_B \in \mathbb{R}^m\) formado por las variables asociadas a \(B\) y \(x_N\) las demás.</p>
            
            <p>Podemos escribir el sistema como</p>
            \[ Bx_B + Nx_N = b. \]
            
            <div class="boxed highlight-strong">
                <h4>Definición: Solución Básica</h4>
                <p>Dada cualquier submatriz \(B\) invertible formada por columnas de \(A\), \(x = (x_B , x_N )\) es una <strong>solución básica</strong> de un programa lineal en la forma estándar, si \(x_B\) es solución de \(Bx_B = b\) y \(x_N = 0\).</p>
                <p>Las variables de \(x_B\) se denominan <strong>variables básicas</strong>.</p>
            </div>
            
            <div class="boxed">
                <h4>Definición: Solución Básica Degenerada</h4>
                <p>Si una o más variables básicas son nulas, entonces la solución se dice <strong>solución básica degenerada</strong>.</p>
            </div>
            
            <p>Consideremos ahora</p>
            \[ Ax = b \]
            \[ x \geqslant 0, \]
            <p>que representa las restricciones de un programa lineal en forma estándar.</p>
            
            <div class="boxed highlight-strong">
                <h4>Definición: Solución Factible</h4>
                <p>Un vector \(x\) que satisfaga estas restricciones, se dice que es <strong>factible</strong>.</p>
                <p>Una solución factible para estas restricciones que también sea básica, se denomina <strong>solución básica factible</strong>.</p>
            </div>
            
            <div class="boxed">
                <h4>Observación</h4>
                <p>Al conjunto de soluciones factibles se le conoce como región factible y se suele denotar por \(F\). Es decir, \(F = \{x | Ax = b, x \geqslant 0\}\).</p>
                
                <h4>Definición: Solución Básica Factible Óptima</h4>
                <p>Una solución básica factible óptima es una solución básica factible que optimiza el problema.</p>
                
                <h4>Observación</h4>
                <p>La solución básica factible óptima, en caso de existir, puede ser única o puede existir más de una.</p>
            </div>
        </section>

        <!-- CONTENIDO DE TEOREMAS -->
        <section id="teoremas" class="tab-content">
            <h3>Teoremas Fundamentales</h3>
            
            <div class="boxed highlight-strong">
                <h4>Teorema: Existencia de Soluciones Básicas Factibles</h4>
                <p>Dado un programa lineal en la forma estándar, donde \(A\) es una matriz de \(m \times n\) de rango \(m\),</p>
                <ol>
                    <li>Si existe una solución factible, entonces existe una solución básica factible;</li>
                    <li>Si existe una solución factible óptima, entonces existe una solución básica factible óptima.</li>
                </ol>
            </div>
            
            <div class="boxed">
                <h4>Observación</h4>
                <p>De la demostración de este teorema se deduce que para buscar una solución óptima en un problema de programación lineal, es suficiente con tener en cuenta las soluciones básicas factibles, puesto que en dicho tipo de solución siempre se consigue el valor óptimo.</p>
            </div>
            
            <div class="boxed highlight-strong">
                <h4>Teorema: Equivalencia de Puntos Extremos y Soluciones Básicas</h4>
                <p>Sea \(A\) una matriz \(m \times n\) de rango \(m\), \(b \in \mathbb{R}^m\). Sea \(K\) el poliedro convexo formado por todos los vectores \(x \in \mathbb{R}^n\) que satisfacen</p>
                \[ Ax = b \]
                \[ x \geqslant 0. \]
                <p>Un vector \(x\) es un punto extremo de \(K\) si, y sólo si, \(x\) es una solución básica factible.</p>
            </div>
            
            <div class="boxed">
                <h4>Corolario</h4>
                <p>Si existe una solución óptima finita en un problema de programación lineal, existe una solución óptima en un punto extremo.</p>
            </div>
        </section>

        <!-- CONTENIDO DE DEMOSTRACIONES -->
        <section id="demostraciones" class="tab-content">
            <h3>Demostraciones</h3>
            
            <div class="sub-tabs">
                <button class="sub-tab-button active" data-subtab="existencia">Existencia de Soluciones Básicas</button>
                <button class="sub-tab-button" data-subtab="equivalencia">Equivalencia Puntos Extremos</button>
            </div>
            
            <!-- SUBCONTENIDO: EXISTENCIA DE SOLUCIONES BÁSICAS -->
            <div id="existencia" class="sub-tab-content active">
                <h4>Demostración: Existencia de Soluciones Básicas Factibles</h4>
                
                <button id="btn-existencia" class="step-button">Resaltar siguiente paso</button>
                
                <div id="existencia-steps" class="step-container">
                    <div class="step">
                        <h5>Parte (1)</h5>
                        <p>Sean \(a_1 , a_2 , \ldots , a_n\) las columnas de \(A\).</p>
                        
                        <p>Supongamos que \(x^T = (x_1 , x_2 , \ldots , x_n )\) es una solución factible. Entonces, en función de las columnas de \(A\), esta solución satisface:</p>
                        \[ x_1 a_1 + x_2 a_2 + \ldots + x_n a_n = b. \]
                        
                        <p>Supongamos que exactamente \(p\) de las variables \(x_i\) son mayores que cero, y por conveniencia, que sean las primeras \(p\) variables. Entonces,</p>
                        \[ x_1 a_1 + x_2 a_2 + \ldots + x_p a_p = b. \]
                        
                        <p>Separamos en dos casos, dependiendo si el conjunto \(a_1 , a_2 , \ldots , a_p\) es linealmente independiente o no:</p>
                    </div>
                    
                    <div class="step">
                        <h5>Caso 1: Vectores linealmente independientes</h5>
                        <p>Si tenemos \(a_1 , a_2 , \ldots , a_p\) linealmente independientes, entonces es evidente que \(p \leqslant m\).</p>
                        
                        <ul>
                            <li>Si \(p = m\), la solución es básica factible y por tanto hemos acabado.</li>
                            <li>Si \(p < m\), como \(\text{rang}(A) = m\), podemos completar con \(m - p\) vectores de los \(n - p\) restantes por lo que el conjunto resultante de \(m\) vectores es linealmente independientes. La asignación del valor cero a las \(m - p\) variables correspondientes da una solución básica factible (degenerada).</li>
                        </ul>
                    </div>
                    
                    <div class="step">
                        <h5>Caso 2: Vectores linealmente dependientes</h5>
                        <p>Si \(a_1 , a_2 , \ldots , a_p\) linealmente dependientes, entonces existen \(\lambda_1 , \lambda_2 , \ldots , \lambda_p \in \mathbb{R}\), no todas nulas y al menos una de ellas positiva tal que</p>
                        \[ \lambda_1 a_1 + \lambda_2 a_2 + \ldots + \lambda_p a_p = 0. \]
                        
                        <p>Consideremos ahora \(\alpha \in \mathbb{R}\), entonces, obtenemos</p>
                        \[ (x_1 - \alpha\lambda_1 )a_1 + (x_2 - \alpha\lambda_2 )a_2 + \ldots + (x_p - \alpha\lambda_p )a_p = b \]
                        
                        <p>como resultado de multiplicar la ecuación anterior por \(\alpha\) y restarla de la ecuación original.</p>
                    </div>
                    
                    <div class="step">
                        <p>Haciendo \(\lambda^T = (\lambda_1 , \lambda_2 , \ldots , \lambda_p , 0, 0, \ldots , 0)\), se observa que para cualquier \(\alpha\)</p>
                        \[ x - \alpha\lambda \]
                        
                        <p>es una solución de las igualdades. Si \(\alpha = 0\) tenemos la solución factible original. Como tenemos que al menos una de las \(\lambda_i\) es positiva, como mínimo una componente de \(x - \alpha\lambda\) decrecerá a medida que \(\alpha\) crece.</p>
                        
                        <p>Incrementamos \(\alpha\) hasta que una o más componentes son cero. Específicamente, seleccionamos \(\alpha = \bar{\alpha}\), donde</p>
                        \[ \bar{\alpha} = \min \left\{ \frac{x_i}{\lambda_i}  : \lambda_i > 0 \right\} \]
                        
                        <p>sea \(k\) un índice para el cual \(\bar{\alpha}=\dfrac{x_k}{\lambda_k}\) y consideramos</p>
                        \[ x_j - \bar{\alpha}\lambda_j. \]
                        
                        <ul>
                            <li>Si \(\lambda_j \leqslant 0\), OK.</li>
                            <li>Si \(\lambda_j > 0\), entonces \(x_j - \bar{\alpha}\lambda_j \geq x_j - \left( \frac{x_j}{\lambda_j} \right)\lambda_j \geqslant 0\).</li>
                        </ul>
                        
                        <p>Acabamos de ver así que la solución dada por \(x - \alpha\lambda\) es factible y tiene a lo sumo \(p - 1\) variables positivas.</p>
                        
                        <p>Al repetir este proceso, en caso necesario, se podrían eliminar las variables positivas hasta tener una solución factible con las columnas correspondientes que son linealmente independientes. En este punto es aplicable el Caso 1.</p>
                    </div>
                    
                    <div class="step">
                        <h5>Parte (2)</h5>
                        <p>Sea \(x^T = (x_1 , x_2 , \ldots , x_n )\) una solución factible óptima. Como en (1), suponemos que hay exactamente \(p\) variables positivas \(x_1 , x_2 , \ldots , x_p\).</p>
                        
                        <p>El caso 2 se desarrolla igual que el anterior, pero además debemos demostrar que la solución \( x - \alpha\lambda\) es óptima.</p>
                        
                        <p>Para \(\alpha\) suficientemente pequeño, la solución dada por \( x - \alpha\lambda\) es una solución factible para valores positivos o negativos de \(\alpha\). Consideremos entonces el valor de la solución \( x - \alpha\lambda\):</p>
                        \[ c^T x - \alpha c^T \lambda. \]
                        
                        <p>Veamos ahora que \(c^T \lambda = 0\). Puesto que si \(c^T \lambda \neq 0\), esto sería:</p>
                        
                        <ul>
                            <li>Si \(c^T \lambda > 0\), para \(\alpha = \bar{\alpha}\), \(c^T x - \bar{\alpha} c^T \lambda < c^T x\).</li>
                            <li>Si \(c^T \lambda < 0\), podemos escoger \(\alpha < 0\) tal que \(c^T x - \alpha c^T \lambda < c^T x\).</li>
                        </ul>
                        
                        <p>Estaríamos así ante una contradicción por la hipótesis de optimalidad de \(x\). Por tanto, necesariamente \(c^T \lambda = 0\).</p>
                        
                        <p>Una vez establecido que la nueva solución factible con menos componentes positivos también es óptima, el resto de la demostración se puede completar exactamente como en la parte (1).</p>
                    </div>
                </div>
            </div>
            
            <!-- SUBCONTENIDO: EQUIVALENCIA PUNTOS EXTREMOS -->
            <div id="equivalencia" class="sub-tab-content">
                <h4>Demostración: Equivalencia de Puntos Extremos y Soluciones Básicas</h4>
                
                <button id="btn-equivalencia" class="step-button">Resaltar siguiente paso</button>
                
                <div id="equivalencia-steps" class="step-container">
                    <div class="step">
                        <h5>Primera Parte: Solución Básica Factible ⇒ Punto Extremo</h5>
                        <p>Si \(x^T = (x_1 , x_2 , \ldots , x_m , 0, 0, \ldots , 0)\) una solución básica factible.</p>
                        
                        <p>Entonces,</p>
                        \[ x_1 a_1 + x_2 a_2 + \ldots + x_m a_m = b, \]
                        
                        <p>donde \(a_1 , a_2 , \ldots , a_m\), las \(m\) primeras columnas de \(A\), son linealmente independientes.</p>
                        
                        <p>Supongamos ahora que \(x\) puede formularse como una combinación convexa de dos puntos distintos en \(K\), por ejemplo, \(x = \alpha y + (1 - \alpha)z\), \(0 < \alpha < 1\), \(y \neq z\). Como todas las componentes de \(x\), \(y\), \(z\) son \(\geq 0\) y además \(0 < \alpha < 1\), el resultado inmediato es que las últimas \(n - m\) componentes de \(y\) y \(z\) son cero.</p>
                    </div>
                    
                    <div class="step">
                        <p>Así, se tiene en especial</p>
                        \[ y_1 a_1 + y_2 a_2 + \ldots + y_m a_m = b \]
                        <p>y</p>
                        \[ z_1 a_1 + z_2 a_2 + \ldots + z_m a_m = b. \]
                        
                        <p>Sin embargo, como los vectores \(a_1 , a_2 , \ldots , a_m\) son linealmente independientes, se deduce que \(x = y = z\) y, en consecuencia, \(x\) es un punto extremo de \(K\).</p>
                    </div>
                    
                    <div class="step">
                        <h5>Segunda Parte: Punto Extremo ⇒ Solución Básica Factible</h5>
                        <p>Recíprocamente, sea \(x\) un punto extremo de \(K\). Supongamos que las componentes distintas de cero de \(x\) son las \(p\) primeras componentes. Entonces,</p>
                        \[ x_1 a_1 + x_2 a_2 + \ldots + x_p a_p = b, \]
                        <p>con \(x_i > 0\), \(i = 1, 2, \ldots , p\).</p>
                        
                        <p>Para demostrar que \(x\) es una solución básica factible, debe demostrarse que los vectores \(a_1 , a_2 , \ldots , a_p\) son linealmente independientes.</p>
                        
                        <p>Esto se hace por contradicción. Supongamos por tanto que \(a_1 , a_2 , \ldots , a_p\) son linealmente dependientes. Entonces existe una combinación lineal no trivial igual a cero:</p>
                        \[ y_1 a_1 + y_2 a_2 + \ldots + y_p a_p = 0. \]
                    </div>
                    
                    <div class="step">
                        <p>Siendo \(y^T = (y_1 , y_2 , \ldots , y_p , 0, 0, \ldots , 0)\), \(y \in \mathbb{R}^n\). Como \(x_i > 0\), \(1 \leq i \leq p\), podemos seleccionar \(\epsilon\) tal que</p>
                        \[ x + \epsilon y \geq 0, \]
                        \[ x - \epsilon y \geq 0. \]
                        
                        <p>Se tiene entonces que \(x = \frac{1}{2} (x + \epsilon y) + \frac{1}{2} (x - \epsilon y)\), que describe a \(x\) como una combinación convexa de dos puntos distintos de \(K\), lo que no puede ser, pues \(x\) es un punto extremo de \(K\).</p>
                        
                        <p>Así, \(a_1 , a_2 , \ldots , a_p\) son linealmente independientes y \(x\) es una solución básica factible. (Aunque si \(p < m\), es una solución básica factible degenerada.)</p>
                    </div>
                    
                    <div class="step">
                        <h5>Corolario</h5>
                        <p>Si existe una solución óptima finita en un problema de programación lineal, existe una solución óptima en un punto extremo.</p>
                        
                        <h5>Demostración</h5>
                        <p>En particular una solución óptima es una solución básica factible.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Gestión de pestañas principales
        document.addEventListener("DOMContentLoaded", function () {
          const tabButtons = document.querySelectorAll(".tab-button");
          const tabContents = document.querySelectorAll(".tab-content");

          tabButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
              const targetId = btn.getAttribute("data-tab");
              tabButtons.forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              tabContents.forEach((sec) => {
                if (sec.id === targetId) sec.classList.add("active");
                else sec.classList.remove("active");
              });
              if (window.MathJax && window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            });
          });

          // Gestión de subpestañas
          const subTabButtons = document.querySelectorAll(".sub-tab-button");
          const subTabContents = document.querySelectorAll(".sub-tab-content");

          subTabButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
              const parentTab = btn.closest('.tab-content');
              const targetId = btn.getAttribute("data-subtab");
              
              // Solo desactivar botones dentro del mismo tab-content
              parentTab.querySelectorAll(".sub-tab-button").forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              
              // Solo desactivar contenidos dentro del mismo tab-content
              parentTab.querySelectorAll(".sub-tab-content").forEach((sec) => {
                if (sec.id === targetId) sec.classList.add("active");
                else sec.classList.remove("active");
              });
              if (window.MathJax && window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            });
          });

          // Resaltado progresivo demostración existencia
          const btnExistencia = document.getElementById("btn-existencia");
          const stepsContainerExistencia = document.getElementById("existencia-steps");
          const stepsExistencia = stepsContainerExistencia ? stepsContainerExistencia.querySelectorAll(".step") : [];
          let currentStepExistencia = -1;

          function showNextStepExistencia() {
            if (!stepsExistencia.length) return;
            if (currentStepExistencia < stepsExistencia.length - 1) {
              currentStepExistencia++;
              stepsExistencia[currentStepExistencia].classList.add("visible");
              btnExistencia.textContent =
                currentStepExistencia < stepsExistencia.length - 1 ? "Resaltar siguiente paso" : "Reiniciar demostración";
              if (window.MathJax && window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            } else {
              // Reiniciar todo
              stepsExistencia.forEach((st) => st.classList.remove("visible"));
              currentStepExistencia = -1;
              btnExistencia.textContent = "Resaltar siguiente paso";
            }
          }

          if (btnExistencia) btnExistencia.addEventListener("click", showNextStepExistencia);

          // Resaltado progresivo demostración equivalencia
          const btnEquivalencia = document.getElementById("btn-equivalencia");
          const stepsContainerEquivalencia = document.getElementById("equivalencia-steps");
          const stepsEquivalencia = stepsContainerEquivalencia ? stepsContainerEquivalencia.querySelectorAll(".step") : [];
          let currentStepEquivalencia = -1;

          function showNextStepEquivalencia() {
            if (!stepsEquivalencia.length) return;
            if (currentStepEquivalencia < stepsEquivalencia.length - 1) {
              currentStepEquivalencia++;
              stepsEquivalencia[currentStepEquivalencia].classList.add("visible");
              btnEquivalencia.textContent =
                currentStepEquivalencia < stepsEquivalencia.length - 1 ? "Resaltar siguiente paso" : "Reiniciar demostración";
              if (window.MathJax && window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            } else {
              // Reiniciar todo
              stepsEquivalencia.forEach((st) => st.classList.remove("visible"));
              currentStepEquivalencia = -1;
              btnEquivalencia.textContent = "Resaltar siguiente paso";
            }
          }

          if (btnEquivalencia) btnEquivalencia.addEventListener("click", showNextStepEquivalencia);
        });
    </script>
</body>
</html>